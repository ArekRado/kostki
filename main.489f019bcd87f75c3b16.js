"use strict";(self.webpackChunkkostki=self.webpackChunkkostki||[]).push([[179],{697:(e,t,n)=>{n.d(t,{nS:()=>Nn,$z:()=>Un,Ah:()=>zn});var a,r,o=n(385),i=function(){return(i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=function(e,t){return t.find((function(t){return t.name===e}))};(r=a||(a={})).box="box",r.ai="ai",r.game="game",r.camera="camera",r.marker="marker",r.ui="ui",r.uiButton="uiButton",r.uiImage="uiImage",r.uiText="uiText";var u,s=function(e){var t,n,a=e.state,r=e.data,o=i(i({},a),{component:i(i({},a.component),(t={},t[r.name]=i(i({},a.component[r.name]),(n={},n[r.entity]=r,n)),t))}),u=c(r.name,a.system);if(void 0!==u){if(void 0===a.component[r.name]||void 0===a.component[r.name][r.entity])return u.create({state:o,component:r});if(u.update)return u.update({state:o,component:r})}return o},d=function(e){var t=e.state,n=e.name,a=p({state:t,name:n});return a?Object.keys(a).reduce((function(e,t){return function(e){var t,n=e.name,a=e.entity,r=e.state,o=r.component[n],u=a,s=(o[u],function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(o,["symbol"==typeof u?u:u+""])),d=i(i({},r),{component:i(i({},r.component),(t={},t[n]=s,t))}),p=l({name:n,state:r,entity:a}),f=c(n,d.system);return f&&p?f.remove({state:d,component:p}):d}({name:n,entity:t,state:e})}),t):t},l=function(e){var t=e.name,n=e.entity,a=e.state.component[t];return a?a[n]:void 0},p=function(e){var t=e.name;return e.state.component[t]},f=function(e){var t=e.entity,n=e.name,a=function(e){var a=e.state;return l({state:a,entity:t,name:n})};return{getComponent:a,setComponent:function(e){var r=e.state,o=e.data,c=a({state:r});return c?r=s({state:r,data:i(i({entity:t,name:n},c),o)}):r}}},y=function(){return(y=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},m=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e};!function(e){e[e.last=3]="last",e[e.time=3]="time",e[e.io=2]="io",e[e.transform=1]="transform",e[e.zero=0]="zero",e[e.sprite=-1]="sprite",e[e.draw=-2]="draw"}(u||(u={}));var v,g,b=function(e){return e.state},h=function(e){var t=e.state,n=e.tick,a=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["state","tick"]),r={name:a.name,priority:a.priority||u.zero,initialize:a.initialize||b,create:a.create||b,tick:function(e){var t=e.state,r=e.eventBuffer,o=t.component[a.name];return o?Object.values(o).reduce((function(e,t){var o=function(e){var t=e.entity,n=e.eventBuffer,a=e.state,r=e.eventHandler,o=e.component;return n[t]?n[t].reduce((function(e,n){if(r){var a=l({state:e,entity:t,name:o.name});return a?r({state:e,event:n,component:a}):e}return e}),a):a}({eventHandler:a.event,state:e,eventBuffer:r,entity:t.entity,component:t});return n?n({state:o,component:t}):o}),t):t},update:a.update,remove:a.remove||b,event:a.event||b};return y(y({},t),{system:m(m([],t.system),[r])})},x=function(e){var t=e.getEngine().getRenderingCanvasClientRect();return null!==t?t.height/t.width:1},T=function(e,t){var n=x(t),a=t.activeCamera;a&&(n>1?(a.orthoLeft=-e,a.orthoRight=e,a.orthoBottom=a.orthoLeft*n,a.orthoTop=a.orthoRight*n):(a.orthoBottom=-e,a.orthoTop=e,a.orthoLeft=a.orthoBottom/n,a.orthoRight=a.orthoTop/n))},S="cameraEntity",w=f({entity:S,name:a.camera}),O=(w.getComponent,w.setComponent),P=1.2,B=function(e){var t=e[0]?1.2*e[0].length:1,n=1.2*e.length;return{center:[(t-1-.2)/2,(n-1-.2)/2],cameraDistance:(t>n?t:n)/2+.2}},E=function(){return(E=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C="first",M={},I={},k=function(e){"first"===C?(M[e.entity]||(M[e.entity]=[]),M[e.entity].push(e)):(I[e.entity]||(I[e.entity]=[]),I[e.entity].push(e))},A={entity:{},component:(v={},v[a.box]={},v[a.ai]={},v[a.game]={},v[a.camera]={},v[a.marker]={},v[a.ui]={},v[a.uiButton]={},v[a.uiImage]={},v[a.uiText]={},v),system:[]};!function(e){e[e.mainMenu=0]="mainMenu",e[e.customLevel=1]="customLevel",e[e.customLevelSettings=2]="customLevelSettings"}(g||(g={}));const L=n.p+"57365b6b32a38acad399fa24be970b62.png",U=n.p+"86711768640182ba9774e66c59e43713.png",R=n.p+"d5fd50f6577249e4bd0a6cedc07b855c.png",z=n.p+"1cece826ef3290f02e8ab121defa70e5.png",N=n.p+"04486ea103fd49156ce128e43c00f4af.png",j=n.p+"4c8888485f10730f523694c6ac7449e4.png",q=n.p+"3bb45fa09a5eb9cd805c7f32aab31591.png",V=n.p+"289b33e3a3e1c125f813747944282bbb.png",Q=n.p+"e7015b6db11decc2aa7f722b6eaaa343.png",G=n.p+"7e6aabd8e3d92edca81c0207761816f0.png",D=n.p+"1a202abfbdfbb945f566e890f0e0fa7f.png",_=n.p+"ad7c3be816ce34c76152ecc6c61d263b.png",W=n.p+"8711d0d55135c6a04bf3e76aa6287504.png",Y=n.p+"717e6eb5fb82bedfc88f6dc0c65b6f12.png",H=n.p+"16c7f9cc6c2acada16547b3befe94a91.png",F=n.p+"2d2b2519ce6d9ed0c93cd7ed21aed043.png",K=n.p+"7fa7abdc3e479f97ee5f6b283630df03.png",J=n.p+"f3941c38549dddc4a8cb586591e36996.png",$=n.p+"62bd7e3778d77e5ca308fcb5f4b0da78.png",X=n.p+"2f30a46bdc58014e8ba857f895bbe5b8.png",Z=n.p+"de0b87223c2e5708366657b7da01c941.png",ee=n.p+"54b2699e76fca159c5797b2b93b10bd4.png",te=n.p+"3d713800c02422e02fe02e70f53e9771.png",ne=n.p+"2f9682e3f7d362cc3087ef4dcbbdfd2b.png",ae=n.p+"62f6adca2ae3c6e088aac66bc47cb54e.png",re=n.p+"9bb2d886948bbd78603ec224904774fd.png",oe=n.p+"2d9f8ec02b7087dc45bf61208aacf7a8.png",ie=n.p+"4fd5888696b352601fd6c1f7a1420e1f.png",ce=n.p+"d62f41f971620bf90529571efed25c8e.png",ue=n.p+"2c7434786497b8ccb02757089a53015a.png",se=n.p+"51f16b6b18086fcc295f8bc02e6c8c45.png",de=n.p+"0dfd6a6b5e5120be13c81ddc1d84a1df.png",le=n.p+"301a367840edef78b86808852d0c067e.png",pe=n.p+"d854a7c9f810ebe5be07e17990bd0ee4.png",fe=n.p+"777079c111d24a4a0402f5afbc95b175.png",ye=n.p+"e1b39772fd20282e80743b1f04be6795.png",me=n.p+"24075b75ce25b7869e6559cccca76b75.png",ve=n.p+"698b6e6ce4fcc13dd8ac2cdb9bb484fe.png",ge=n.p+"38ca2b18556222743ee8778742514d73.png",be=n.p+"aebe569c1bf5190e0038b7098791359c.png",he=n.p+"d1390ce752b5ee52126d21de796a81f8.png",xe=n.p+"d54421100963619575d7b3f35876fdfe.png",Te=n.p+"cde379b0a92320968a3826f29eff20fc.png",Se=n.p+"d1b88dc4aa017270afbb48ce8c2d93ee.png",we=n.p+"f07f0db4072406727dc668f8f643b725.png",Oe=n.p+"f60fcf550b1112ec6a6bb8c80cc4b142.png",Pe=n.p+"5fded717b6adc588c2dcdedd900f3bea.png",Be=n.p+"ed032e786ebb26ea79c773fd85684876.png",Ee=n.p+"7960efbc05f46d226a4e232b391a79ea.png";var Ce,Me,Ie=[L,U,R,z,N,j,q],ke=[L,V,Q,G,D,_,W],Ae=[L,Y,H,F,K,J,$],Le=[L,X,Z,ee,te,ne,ae],Ue=[L,re,oe,ie,ce,ue,se],Re=[L,de,le,pe,fe,ye,me],ze=[L,ve,ge,be,he,xe,Te],Ne=[L,Se,we,Oe,Pe,Be,Ee],je={},qe=function(e){var t=e.textureUrl,n=e.scene,a=new o.Texture(t,n,void 0,void 0,o.Texture.NEAREST_NEAREST_MIPLINEAR);return je[t]=a,a},Ve=function(e){var t=e.mesh,n=e.texture,a=e.scene,r=e.color;t.material.diffuseColor=new o.Color3(r[0],r[1],r[2]);var i=function(e){var t=e.textureUrl,n=e.scene;return je[t]?je[t]:qe({textureUrl:t,scene:n})}({textureUrl:n,scene:a});return t.material.diffuseTexture=i,i},Qe=function(){return(Qe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ge=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e};!function(e){e[e.up=0]="up",e[e.down=1]="down",e[e.left=2]="left",e[e.right=3]="right"}(Ce||(Ce={})),function(e){var t;(t=e.Type||(e.Type={}))[t.onClick=0]="onClick",t[t.rotationEnd=1]="rotationEnd",t[t.rotate=2]="rotate"}(Me||(Me={}));var De=function(e){return e>2*Math.PI||e<-2*Math.PI?-2*Math.PI:e},_e=function(e){var t=e.state,n=e.ai,a=Jt({state:t});return n&&(null==a?void 0:a.colorBlindMode)?n.textureSet:Ie},We=function(e){var t=e.entity,n=e.state,a=Jt({state:n});return a?s({state:n,data:Qe(Qe({},a),{boxRotationQueue:Ge(Ge([],a.boxRotationQueue),[t])})}):n},Ye=function(e){var t=e.entity,n=e.animationEndCallback,a=(e.direction,e.color),r=e.texture,i=zn.getTransformNodeByUniqueId(parseInt(t));if(i){var c=o.Tools.ToRadians(90)*(Math.random()>.5?1:-1),u=Math.random()>.5?"x":"y",s=i.rotation,d=new o.Vector3("x"===u?c:0,"y"===u?c:0,0).add(s),l=new o.Vector3(De(d.x),De(d.y),De(d.z)),p=new o.Animation("rotateAnimation","rotation",1,o.Animation.ANIMATIONTYPE_VECTOR3,o.Animation.ANIMATIONLOOPMODE_RELATIVE),f=new o.AnimationEvent(.5,n,!0);p.addEvent(f);var y=[];y.push({frame:0,value:s}),y.push({frame:.5,value:l}),p.setKeys(y),i.animations[i.animations.length]=p,zn.beginAnimation(i,0,1,!1);var m=i.getChildren();m.slice(1,m.length).forEach((function(e){var t=zn.getMeshByUniqueId(e.uniqueId);t&&Ve({mesh:t,color:a,texture:r,scene:zn})}))}},He=function(e){return 6===e?1:e+1},Fe=function(e){var t=e.state,n=e.ai,a=e.box,r=a.entity,o=a.dots;return n&&(o=He(a.dots),Ye({entity:r,animationEndCallback:function(){k({type:Me.Type.rotationEnd,entity:r,payload:{ai:n,shouldExplode:6===a.dots}})},texture:_e({state:t,ai:n})[o],color:n.color}),t=We({entity:r,state:t})),s({state:t,data:Qe(Qe({},a),{isAnimating:!0,player:(null==n?void 0:n.entity)||"",dots:o})})},Ke=function(e){var t=e.boxEntity,n=e.texture,a=e.color,r=zn.getTransformNodeByUniqueId(parseInt(t));r&&(r.rotation.x=0,r.rotation.y=0,r.getChildren().forEach((function(e){var t=zn.getMeshByUniqueId(e.uniqueId);t&&Ve({mesh:t,color:a,texture:n,scene:zn})})))},Je=function(e){return h({state:e,name:a.box,create:function(e){var t=e.state,n=e.component,r=n.gridPosition,i=l({state:t,name:a.ai,entity:n.player||""});!function(e){var t=e.scene,n=e.name,a=e.uniqueId,r=e.position,i=e.color,c=e.state,u=e.ai,s=e.box,d=new o.TransformNode("box "+n,t);d.uniqueId=a,d.position.x=r[0],d.position.y=r[1],[[new o.Vector3(0,0,-.5),new o.Vector3(0,0,0)],[new o.Vector3(-.5,0,0),new o.Vector3(0,Math.PI/2,0)],[new o.Vector3(0,0,.5),new o.Vector3(0,Math.PI,0)],[new o.Vector3(.5,0,0),new o.Vector3(0,-Math.PI/2,0)],[new o.Vector3(0,.5,0),new o.Vector3(Math.PI/2,0,0)],[new o.Vector3(0,-.5,0),new o.Vector3(-Math.PI/2,0,0)]].forEach((function(e,n){var r=e[0],l=e[1],p=0===n;setTimeout((function(){var e=o.Mesh.CreatePlane("plane"+n,1,t,!1);e.parent=d,e.material=new o.StandardMaterial("mat",t),p&&Ve({mesh:e,color:i,texture:_e({state:c,ai:u})[s.dots],scene:t}),e.material.alpha=1,e.position=r,e.rotation=l,e.setParent(d),e.actionManager=new o.ActionManager(t),e.actionManager.registerAction(new o.ExecuteCodeAction(o.ActionManager.OnPickUpTrigger,(function(){k({entity:Yt,type:ct.Type.playerClick,payload:{boxEntity:a.toString()}})})))}),p?0:400*Math.random()+100)}))}({scene:zn,name:r[0]+"-"+r[1],position:[r[0]*P,r[1]*P],uniqueId:parseFloat(n.entity),texture:(null==i?void 0:i.textureSet[n.dots])||L,color:(null==i?void 0:i.color)||[1,1,1],ai:i,box:n,state:t});var c=Jt({state:t});return c?t=s({state:t,data:Qe(Qe({},c),{grid:Ge(Ge([],c.grid),[n.entity])})}):t},remove:function(e){var t=e.state,n=e.component,a=zn.getTransformNodeByUniqueId(parseInt(n.entity));return null==a||a.dispose(),t},event:function(e){var t=e.state,n=e.component,a=e.event;switch(a.type){case Me.Type.rotationEnd:return function(e){var t=e.state,n=e.component,a=e.event.payload,r=a.ai,o=a.shouldExplode;t=function(e){var t=e.entity,n=e.state,a=Jt({state:n});return a?s({state:n,data:Qe(Qe({},a),{boxRotationQueue:a.boxRotationQueue.filter((function(e){return e!==t}))})}):n}({entity:n.entity,state:t}),Ke({boxEntity:n.entity,texture:_e({state:t,ai:r})[n.dots],color:r.color});var i=Jt({state:t});if(!i)return t;o?t=function(e){var t=e.state,n=e.ai,a=e.box.gridPosition,r=a[0],o=a[1],i=Sn({state:t});return[on(i,o,r-1),on(i,o,r+1),on(i,o-1,r),on(i,o+1,r)].filter((function(e){return void 0!==e})).reduce((function(e,t,a){return e=Fe({ai:n,box:t,state:e}),We({entity:t.entity,state:e})}),t)}({state:t,box:n,ai:r}):0===i.boxRotationQueue.length&&k({type:ct.Type.nextTurn,entity:Yt,payload:{ai:r}});var c=zn.getTransformNodeByUniqueId(parseInt(n.entity));return c&&(c.animations=[]),s({state:t,data:Qe(Qe({},n),{isAnimating:!1})})}({state:t,component:n,event:a});case Me.Type.rotate:return function(e){var t=e.state,n=e.component,a=e.event;return Ye({entity:n.entity,animationEndCallback:function(){Ke({boxEntity:n.entity,texture:a.payload.texture,color:a.payload.color})},texture:a.payload.texture,color:a.payload.color}),t}({state:t,component:n,event:a})}}})},$e="localDbKey",Xe=function(){localStorage.removeItem($e)};const Ze=n.p+"de1ab0613214552916d369d2014d1d95.png";var et="38127445920450264",tt=f({entity:et,name:a.marker}),nt=(tt.getComponent,tt.setComponent),at=(n(290),function(){return Math.floor(1e17*Math.random())}),rt=function(e){var t,n=e.entity,a=e.advancedTexture,r=e.onPointerUpObservable,o=null===(t=a.getChildren().find((function(e){return e.name===Ot})))||void 0===t?void 0:t.getChildByName(n);o&&o.onPointerUpObservable.add(r)},ot=at().toString();const it=n.p+"8b1469fe19d1d6c3811ef4ef5c6df926.png";var ct,ut=at().toString(),st=at().toString(),dt=at().toString(),lt=at().toString(),pt=at().toString(),ft=at().toString(),yt=at().toString(),mt=at().toString(),vt=at().toString(),gt=at().toString(),bt=at().toString(),ht=at().toString(),xt=at().toString(),Tt=at().toString(),St=function(e){switch(e){case Ht.disabled:return"Disabled";case Ht.random:return"Random";case Ht.easy:return"Easy";case Ht.medium:return"Medium";case Ht.hard:return"Hard"}},wt="23505760496063488",Ot="root",Pt=f({entity:wt,name:a.ui}),Bt=(Pt.getComponent,Pt.setComponent),Et=function(e){var t,n=e.state;return null===(t=e.advancedTexture.getChildren().find((function(e){return e.name===Ot})))||void 0===t||t.clearControls(),n=d({state:n,name:a.uiImage}),n=d({state:n,name:a.uiButton}),d({state:n,name:a.uiText})},Ct=function(e){var t=e.state,n=e.ui,r=e.advancedTexture,o=e.attachEvents;switch(n.type){case g.customLevel:t=function(e){return s({state:e.state,data:{entity:ot,name:a.uiButton,text:"X",size:[[.1,.1],[.1,.1],[.1,.1]],position:[[.95,.05],[.95,.05],[.95,.05]]}})}({state:t}),o&&function(e){rt({advancedTexture:e.advancedTexture,entity:ot,onPointerUpObservable:function(){Xe(),k({type:ct.Type.cleanScene,entity:Yt,payload:{newScene:g.mainMenu}})}})}({advancedTexture:r});break;case g.mainMenu:t=function(e){var t=e.state;t=s({state:t,data:{entity:ut,name:a.uiImage,url:it,size:[[.5,.3],[.5,.3],[.5,.3]],maxSize:[[.5,.3],[.5,.3],[.5,.3]],position:[[.5,.15],[.5,.15],[.5,.15]],aspectRation:1}});var n=[[.6,.1],[.4,.1],[.2,.1]];t=s({state:t,data:{entity:st,name:a.uiButton,text:"Start",size:n,position:[[.5,.4],[.5,.4],[.5,.4]]}}),t=s({state:t,data:{entity:dt,name:a.uiButton,text:"Select level",size:n,position:[[.5,.6],[.5,.6],[.5,.6]]}}),t=s({state:t,data:{entity:lt,name:a.uiButton,text:"Mute",size:n,position:[[.5,.8],[.5,.8],[.5,.8]]}});var r=Jt({state:t});return t=s({state:t,data:{entity:pt,name:a.uiText,text:"version "+(null==r?void 0:r.version),size:n,color:"#444",fontSize:24,position:[[.5,.9],[.5,.9],[.5,.9]]}}),s({state:t,data:{entity:ft,name:a.uiText,text:"created by Arek Rado",size:n,color:"#444",fontSize:24,position:[[.5,.95],[.5,.95],[.5,.95]]}})}({state:t}),o&&function(e){var t=e.advancedTexture;rt({advancedTexture:t,entity:st,onPointerUpObservable:function(){k({type:ct.Type.cleanScene,entity:Yt,payload:{newScene:g.customLevelSettings}})}}),rt({advancedTexture:t,entity:dt,onPointerUpObservable:function(){k({type:ct.Type.cleanScene,entity:Yt,payload:{newScene:g.customLevelSettings}})}}),rt({advancedTexture:t,entity:lt,onPointerUpObservable:function(){k({type:ct.Type.cleanScene,entity:Yt,payload:{newScene:g.customLevelSettings}})}})}({advancedTexture:r});break;case g.customLevelSettings:t=function(e){var t=e.state,n=Jt({state:t}),r=[[.5,.1],[.4,.1],[.3,.1]];return t=s({state:t,data:{entity:bt,name:a.uiText,text:"Map",size:[[.9,.1],[.4,.1],[.3,.1]],position:[[.5,.05],[.5,.05],[.5,.05]]}}),t=s({state:t,data:{entity:xt,name:a.uiButton,text:"<",size:[[.1,.5],[.2,.5],[.2,.5]],position:[[.1,.25],[.2,.25],[.2,.25]]}}),t=s({state:t,data:{entity:ht,name:a.uiButton,text:">",size:[[.1,.5],[.2,.5],[.2,.5]],position:[[.9,.25],[.8,.25],[.8,.25]]}}),t=s({state:t,data:{entity:Tt,name:a.uiButton,text:"Start >",size:r,position:[[.5,.6],[.5,.6],[.5,.6]]}}),t=s({state:t,data:{entity:mt,name:a.uiButton,text:"Difficulty: "+((null==n?void 0:n.customLevelSettings.difficulty)?St(null==n?void 0:n.customLevelSettings.difficulty):"-"),size:r,position:[[.25,.75],[.25,.75],[.25,.75]]}}),t=s({state:t,data:{entity:yt,name:a.uiButton,text:"Players: "+(null==n?void 0:n.customLevelSettings.players.length),size:r,position:[[.25,.85],[.25,.85],[.25,.85]]}}),t=s({state:t,data:{entity:vt,name:a.uiButton,text:"["+((null==n?void 0:n.customLevelSettings.quickStart)?"x":" ")+"] Quick Start",size:r,position:[[.75,.75],[.75,.75],[.75,.75]]}}),s({state:t,data:{entity:gt,name:a.uiButton,text:"["+((null==n?void 0:n.colorBlindMode)?"x":" ")+"] Color blind mode",size:r,position:[[.75,.85],[.75,.85],[.75,.85]]}})}({state:t}),o&&function(e){var t=e.advancedTexture;rt({advancedTexture:t,entity:yt,onPointerUpObservable:function(){k({type:ct.Type.changePlayers,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:mt,onPointerUpObservable:function(){k({type:ct.Type.changeDifficulty,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:vt,onPointerUpObservable:function(){k({type:ct.Type.changeQuickStart,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:gt,onPointerUpObservable:function(){k({type:ct.Type.changeColorBlindMode,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:bt,onPointerUpObservable:function(){k({type:ct.Type.changeMapType,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:ht,onPointerUpObservable:function(){k({type:ct.Type.changeNextMap,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:xt,onPointerUpObservable:function(){k({type:ct.Type.changePrevMap,entity:Yt,payload:{}})}}),rt({advancedTexture:t,entity:Tt,onPointerUpObservable:function(){k({type:ct.Type.startCustomLevel,entity:Yt,payload:{}})}})}({advancedTexture:r})}return t},Mt=null,It=function(){return(It=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},kt=function(e){return console.trace("Wrong path",e),e},At=function(){return(At=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Lt=function(e){var t=e.state,n=e.component;t=function(e){var t=e.state,n=e.game;t=function(e){var t=e.state,n=e.ai;t=d({state:t,name:a.ai});var r=Jt({state:t});return r&&(t=s({state:t,data:It(It({},r),{playersQueue:n.map((function(e){return e.entity}))})})),n.reduce((function(e,t){return s({state:e,data:t})}),t)}({state:t=Array.from({length:8}).reduce((function(e,t,n){return Array.from({length:8}).reduce((function(e,t,r){return s({state:e,data:{name:a.box,entity:at().toString(),isAnimating:!1,dots:0,gridPosition:[r,n],player:void 0}})}),e)}),t),ai:n.customLevelSettings.players.map((function(e){return At({},e)}))});var r=B(Sn({state:t})),o=r.center,i=r.cameraDistance;return t=O({state:t,data:{position:[o[0],o[1]],distance:i}}),Bt({state:t,data:{type:g.customLevel}})}({state:t,game:n});var r=Zt({state:t});if(!r)return kt(t);t=$t({state:t,data:{currentPlayer:r.entity}});var o=Jt({state:t});if(!o)return kt(t);if(o.customLevelSettings.quickStart&&(t=function(e){var t,n=e.state,r=(null===(t=Jt({state:n}))||void 0===t?void 0:t.grid.length)||1;return Array.from({length:2*r}).reduce((function(e){var t=Jt({state:e}),n=l({state:e,name:a.ai,entity:(null==t?void 0:t.currentPlayer)||""});if(!t||!n)return kt(e);var r=wn({state:e,ai:n,preferEmptyBoxes:!0});if(!r)return kt(e);e=s({state:e,data:At(At({},r),{player:n.entity,dots:He(r.dots)})});var o=Zt({state:e});return o?e=s({state:e,data:At(At({},t),{currentPlayer:o.entity})}):e}),n)||n}({state:t}),setTimeout((function(){!function(e){var t=e.state,n=Jt({state:t});n&&n.grid.forEach((function(e){var n=l({state:t,entity:e,name:a.box}),r=l({state:t,entity:(null==n?void 0:n.player)||"",name:a.ai});n&&r&&k({type:Me.Type.rotate,entity:e,payload:{color:r.color,texture:_e({state:t,ai:r})[n.dots],direction:Ce.up}})}))}({state:t})}),500)),t=$t({state:t,data:{gameStarted:!0}}),!r.human){var i=wn({state:t,ai:r});i&&(t=Fe({box:i,state:t,ai:r}))}return t},Ut=[.6,.6,.6],Rt=[.11,.79,.29],zt=[.09,.84,1],Nt=[1,.73,.29],jt=[.99,.97,.32],qt=[.99,.42,.45],Vt=[.99,.47,.94],Qt=[.67,.23,.94],Gt=function(){return(Gt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Dt=function(e,t,n,r,o){return void 0===r&&(r=!1),void 0===o&&(o=Ht.easy),{entity:e,name:a.ai,human:r,level:o,color:t,textureSet:n,active:!0}},_t=function(){return[Dt(Un,zt,Ie,!0,Ht.hard),Dt("2",qt,ke,!1,Ht.hard),Dt("3",Rt,Ae,!1,Ht.medium),Dt("4",jt,Le),Dt("5",Nt,Ue),Dt("6",Vt,Re),Dt("7",Ut,ze),Dt("8",Qt,Ne)]},Wt=function(){return(Wt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Yt="game";!function(e){var t;(t=e.Type||(e.Type={}))[t.startCustomLevel=0]="startCustomLevel",t[t.nextTurn=1]="nextTurn",t[t.boxExplosion=2]="boxExplosion",t[t.playerClick=3]="playerClick",t[t.cleanScene=4]="cleanScene",t[t.changePlayers=5]="changePlayers",t[t.changeDifficulty=6]="changeDifficulty",t[t.changeQuickStart=7]="changeQuickStart",t[t.changeColorBlindMode=8]="changeColorBlindMode",t[t.changeMapType=9]="changeMapType",t[t.changeNextMap=10]="changeNextMap",t[t.changePrevMap=11]="changePrevMap"}(ct||(ct={}));var Ht,Ft,Kt=f({entity:Yt,name:a.game}),Jt=Kt.getComponent,$t=Kt.setComponent,Xt=function(e){var t=e.playersQueue,n=e.index,r=e.state,o=l({state:r,name:a.ai,entity:t[n]});return(null==o?void 0:o.active)?o:Xt({playersQueue:t,index:n>=t.length?0:n+1,state:r})},Zt=function(e){var t=e.state,n=Jt({state:t});if(n){var a=n.playersQueue.findIndex((function(e){return n.currentPlayer===e}));return Xt({playersQueue:n.playersQueue,index:a+1,state:t})}},en=function(e){return h({state:e,name:a.game,event:function(e){var t=e.state,n=e.component,r=e.event;switch(r.type){case ct.Type.startCustomLevel:return Lt({state:t,component:n,event:r});case ct.Type.nextTurn:return function(e){var t=e.state,n=e.component,r=n.gameStarted,o=n.boxRotationQueue;if(r&&0===o.length){var i=Zt({state:t});if(!i)return t;var c=l({name:a.ai,state:t,entity:i.entity});if(!c)return t;if(t=s({state:t,data:Wt(Wt({},n),{currentPlayer:c.entity})}),!c.human&&c.active){var u=wn({state:t,ai:c});if(!u)return function(e){var t=e.state,n=e.ai,r=e.component;t=s({state:t,data:Wt(Wt({},n),{active:!1})});var o=p({state:t,name:a.ai});return 1===Object.values(o||{}).reduce((function(e,t){return t.active?e+1:e}),0)?(Xe(),s({state:t,data:Wt(Wt({},r),{gameStarted:!1})})):(k({type:ct.Type.nextTurn,entity:Yt,payload:{ai:n}}),t)}({state:t,component:n,ai:c});t=nt({state:t,data:{color:c.color,position:[u.gridPosition[0]*P,u.gridPosition[1]*P]}}),t=Fe({box:u,state:t,ai:c}),t=We({state:t,entity:u.entity})}}return function(e){localStorage.setItem($e,JSON.stringify(e))}(t),t}({state:t,component:n,event:r});case ct.Type.playerClick:return function(e){var t=e.state,n=e.component,r=e.event,o=n.currentPlayer,i=n.gameStarted,c=n.boxRotationQueue,u=l({state:t,name:a.box,entity:r.payload.boxEntity}),s=void 0===(null==u?void 0:u.player)||(null==u?void 0:u.player)===o;if(i&&0===c.length&&s){var d=l({name:a.ai,state:t,entity:o});u&&(null==d?void 0:d.human)&&(t=nt({state:t,data:{color:d.color,position:[u.gridPosition[0]*P,u.gridPosition[1]*P]}}),t=Fe({box:u,state:t,ai:d}))}return t}({state:t,component:n,event:r});case ct.Type.cleanScene:return function(e){var t=e.state;return t=Bt({state:t,data:{type:e.event.payload.newScene}}),t=$t({state:t,data:{round:0,grid:[],currentPlayer:"",playersQueue:[],boxRotationQueue:[],gameStarted:!1}}),t=d({state:t,name:a.box}),d({state:t,name:a.ai})}({state:t,component:n,event:r});case ct.Type.changePlayers:return function(e){var t=e.state,n=e.component,a=8===n.customLevelSettings.players.length?2:n.customLevelSettings.players.length+1;return $t({state:t,data:{customLevelSettings:Gt(Gt({},n.customLevelSettings),{players:_t().slice(0,a)})}})}({state:t,component:n,event:r});case ct.Type.changeDifficulty:return function(e){var t,n=e.state,a=e.component,r=[Ht.easy,Ht.medium,Ht.hard],o=r.findIndex((function(e){return e===a.customLevelSettings.difficulty})),i=-1===o?r[0]:null!==(t=r[o+1])&&void 0!==t?t:r[0];return $t({state:n,data:{customLevelSettings:Gt(Gt({},a.customLevelSettings),{difficulty:i})}})}({state:t,component:n,event:r});case ct.Type.changeQuickStart:return function(e){var t=e.component;return $t({state:e.state,data:{customLevelSettings:Gt(Gt({},t.customLevelSettings),{quickStart:!t.customLevelSettings.quickStart})}})}({state:t,component:n,event:r});case ct.Type.changeColorBlindMode:return function(e){return $t({state:e.state,data:{colorBlindMode:!e.component.colorBlindMode}})}({state:t,component:n,event:r});case ct.Type.changeMapType:case ct.Type.changeNextMap:case ct.Type.changePrevMap:return function(e){return e.state}({state:t,component:n,event:r})}}})},tn=function(){return(tn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},nn=function(e){var t=e.dataGrid,n=e.minNoise,a=e.currentPlayer;return t.reduce((function(e,t,r){return e[r]=t.reduce((function(e,t,r){if(t.player!==a||void 0===t.player)return e;var o=Math.max(n,100*Math.random()),i=t.points*o/100;return e[r]=tn(tn({},t),{points:t.points-i}),e}),t),e}),t)},an=function(){return(an=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e){e[e.disabled=0]="disabled",e[e.random=1]="random",e[e.easy=2]="easy",e[e.medium=3]="medium",e[e.hard=4]="hard"}(Ht||(Ht={})),function(e){e.Type||(e.Type={})}(Ft||(Ft={}));var rn,on=function(e,t,n){return e&&e[n]?e[n][t]:void 0},cn=0,un=10,sn=-10,dn=-5,ln=-4,pn=-15,fn=50,yn=0,mn=1,vn=2,gn=7,bn=-5,hn=-4,xn=0,Tn=0;!function(e){e[e.less=-1]="less",e[e.equal=0]="equal",e[e.more=1]="more"}(rn||(rn={}));var Sn=function(e){var t=e.state,n=Jt({state:t});return n?n.grid.reduce((function(e,n){var r=l({name:a.box,state:t,entity:n});if(r){var o=r.gridPosition[0],i=r.gridPosition[1];e[o]||(e[o]=[]),e[o][i]=an(an({},r),{points:0})}return e}),[]):[]},wn=function(e){var t=e.state,n=e.ai,a=e.preferEmptyBoxes,r=n.entity,o=Sn({state:t});if(o=function(e){var t=e.dataGrid,n=e.currentPlayer,a=e.preferEmptyBoxes;return t.reduce((function(e,r,o){return e[o]=r.reduce((function(e,r,i){if(r.player!==n.entity&&void 0!==r.player)return e;var c=[[on(t,i-1,o-1),on(t,i,o-1),on(t,i+1,o-1)],[on(t,i-1,o),on(t,i,o),on(t,i+1,o)],[on(t,i-1,o+1),on(t,i,o+1),on(t,i+1,o+1)]],u=function(e){var t=e.grid3x3,n=e.preferEmptyBoxes,a=e.currentPlayer,r=t[1][1];return function(e){return[e[1][0],e[0][1],e[1][2],e[2][1]]}(t).reduce((function(e,t){if(!t)return e+yn;var o=r.dots===t.dots?rn.equal:r.dots>t.dots?rn.more:rn.less;if(t.player!==r.player&&void 0!==t.player){if(n&&void 0===r.player&&t.player===a.entity)return Math.random()>.5?e+15:e;if(o===rn.more){var i=r.dots-t.dots;return e+cn-i}if(o===rn.equal)return e+un*r.dots;if(o===rn.less)return i=t.dots-r.dots,e+sn*i}else{if(6===r.dots)return e;if(o===rn.more)return e+dn;if(o===rn.equal)return 6===t.dots&&6===r.dots?e+fn:e+ln;if(o===rn.less)return 6===t.dots?e+2*pn:e+pn}return e}),0)}({grid3x3:c,preferEmptyBoxes:a,currentPlayer:n})+function(e){var t=e.grid3x3,n=t[1][1];return function(e){return[e[0][0],e[0][2],e[2][0],e[2][2]]}(t).reduce((function(e,t){if(!t)return e+Tn;var a=n.dots===t.dots?rn.equal:n.dots>t.dots?rn.more:rn.less;if(t.player!==n.player&&void 0!==t.player){if(a===rn.more)return e+mn;if(a===rn.equal)return 6===t.dots?e+-10*vn:e+vn;if(a===rn.less)return 6===t.dots?e+2*gn:e+gn}else{if(6===n.dots)return e;if(a===rn.more)return e+bn;if(a===rn.equal)return e+hn;if(a===rn.less){var r=t.dots-n.dots;return e+xn+Math.pow(r,2)}}return e}),0)}({grid3x3:c,preferEmptyBoxes:a,currentPlayer:n});return e[i]=an(an({},r),{points:r.points+u}),e}),r),e}),t)}({currentPlayer:n,dataGrid:o=function(e){var t=e.dataGrid;return t.reduce((function(e,t,n){return e[n]=t.reduce((function(e,t,n){var a=void 0===t.player?t.points+50:t.points;return e[n]=an(an({},t),{points:a}),e}),t),e}),t)}({dataGrid:o}),preferEmptyBoxes:!!a}),!a)switch(n.level){case Ht.disabled:o=function(e){var t=e.dataGrid;return t.reduce((function(e,t,n){return e[n]=t.reduce((function(e,t,n){return e[n].player="-1",e}),t),e}),t)}({dataGrid:o});break;case Ht.random:o=nn({dataGrid:o,minNoise:100,currentPlayer:r});break;case Ht.easy:o=nn({dataGrid:o,minNoise:70,currentPlayer:r});break;case Ht.medium:o=nn({dataGrid:o,minNoise:0,currentPlayer:r})}return function(e){var t=e.currentPlayer,n=-1/0,a=[];e.dataGrid.forEach((function(e){e.forEach((function(e){var r=void 0===e.player,o=e.player===t;(r||o)&&(e.points>n&&(a=[]),e.points>=n&&(n=e.points,a.push(e)))}))}));var r=Math.floor(Math.random()*a.length);return a[r]}({currentPlayer:r,dataGrid:o})},On=function(e){var t=e.value,n=e.min,a=e.max;return t<=n?n:t>=a?a:t},Pn=[768,1200,1400],Bn=function(e,t){return t.find((function(t,n){return e<Pn[n]}))||t[t.length-1]},En=function(e){var t=e.element,n=e.babylonElement,a=e.scene,r=a.getEngine(),o=function(){var e,o=r.getRenderingCanvasClientRect(),i=o?o.width:1,c=t.aspectRation?x(a):1,u=[100*((e=Bn(i,t.position))[0]-.5)+"%",100*(e[1]-.5)+"%"],s=u[0],d=u[1],l=Bn(i,t.size),p=[l[0],l[1]/c],f=t.minSize?Bn(i,t.minSize):[0,0],y=t.maxSize?Bn(i,t.maxSize):[1,1],m=On({value:p[0],min:f[0],max:y[0]}),v=On({value:p[1],min:f[1],max:y[1]});n.width=m,n.height=v,n.top=d,n.left=s};return o(),r.onResizeObservable.add(o),n.onDisposeObservable.add((function(){return r.onResizeObservable.removeCallback(o)})),t},Cn=function(e){var t,n=e.entity;return null===(t=null==Mt?void 0:Mt.getChildren().find((function(e){return e.name===Ot})))||void 0===t?void 0:t.getChildByName(n)},Mn=function(){return(Mn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},In=n(155),kn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function An(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{var n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}In.env.PUBLIC_URL="";var Ln=document.getElementById("game"),Un="humanPlayer",Rn=new o.Engine(Ln,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1}),zn=new o.Scene(Rn);Rn.runRenderLoop((function(){zn&&zn.activeCamera&&zn.render()}));var Nn=new o.UniversalCamera("UniversalCamera",new o.Vector3(0,0,-1),zn);Nn.mode=o.Camera.ORTHOGRAPHIC_CAMERA;var jn=new o.HemisphericLight("light",new o.Vector3(0,0,1),zn);jn.intensity=1,jn.diffuse=new BABYLON.Color3(1,1,1),jn.specular=new BABYLON.Color3(1,1,1),jn.groundColor=new BABYLON.Color3(1,1,1),"serviceWorker"in navigator&&function(e){if("serviceWorker"in navigator){if(new URL(In.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{var t="".concat(In.env.PUBLIC_URL,"/service-worker.js");kn?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((t=>{var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):An(e,undefined)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):An(t,e)}))}}();var qn=function(){var e,t=A,n="0.0.0";t=function(e){return h({state:e,name:a.ai,create:function(e){var t=e.component,n=e.state;return setTimeout((function(){t.textureSet.forEach((function(e){var t=new Image;t.src=e,t.onload=function(){qe({textureUrl:e,scene:zn})}}))}),2e3*Math.random()+1e3),n}})}(t=Je(t)),t=function(e){return h({state:e,name:a.uiText,create:function(e){var t,n,a=e.state,r=e.component,o=new BABYLON.GUI.TextBlock(r.entity);return o.text=r.text,o.color=null!==(t=r.color)&&void 0!==t?t:"#fff",o.fontSize=null!==(n=r.fontSize)&&void 0!==n?n:24,En({element:r,babylonElement:o,scene:zn}),null==Mt||Mt.addControl(o),a},remove:function(e){var t=e.state,n=e.component,a=Cn({entity:n.entity});return a&&a.dispose(),t}})}(t=function(e){return h({state:e,name:a.uiImage,create:function(e){var t=e.state,n=e.component,a=new BABYLON.GUI.Image(n.entity,n.url);return En({element:n,babylonElement:a,scene:zn}),null==Mt||Mt.addControl(a),t},remove:function(e){var t=e.state,n=e.component,a=Cn({entity:n.entity});return a&&a.dispose(),t}})}(t=function(e){return h({state:e,name:a.uiButton,create:function(e){var t,n,a,r,o,i=e.state,c=e.component,u=BABYLON.GUI.Button.CreateSimpleButton(c.entity,c.text);return En({element:c,babylonElement:u,scene:zn}),u.color=null!==(t=c.color)&&void 0!==t?t:"white",u.cornerRadius=null!==(n=c.cornerRadius)&&void 0!==n?n:0,u.background=null!==(a=c.background)&&void 0!==a?a:"transparent",u.fontSize=null!==(r=c.fontSize)&&void 0!==r?r:30,u.isPointerBlocker=null===(o=c.isPointerBlocker)||void 0===o||o,null==Mt||Mt.addControl(u),i},update:function(e){var t=e.state,n=e.component,a=Cn({entity:n.entity});return a&&a.textBlock&&(a.textBlock.text=n.text),t},remove:function(e){var t=e.state,n=e.component,a=Cn({entity:n.entity});return a&&a.dispose(),t}})}(t=function(e){return h({state:e,name:a.ui,create:function(e){var t=e.state,n=e.component;return Mt=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("ui",!1,zn),t=Et({advancedTexture:Mt,state:t}),Ct({state:t,ui:n,advancedTexture:Mt,attachEvents:!0})},update:function(e){var t=e.state,n=e.component;return Mt&&(t=Et({advancedTexture:Mt,state:t}),t=Ct({state:t,ui:n,advancedTexture:Mt,attachEvents:!0})),t},tick:function(e){var t=e.state,n=e.component;return Mt&&(t=Ct({state:t,ui:n,advancedTexture:Mt,attachEvents:!1})),t}})}(t=function(e){return h({state:e,name:a.camera,create:function(e){var t=e.state,n=e.component;return Nn.position.x=n.position[1],Nn.position.y=n.position[0],Nn.position.z=-10,Nn.setTarget(new o.Vector3(n.position[1],n.position[0])),T(n.distance,zn),t},update:function(e){var t=e.state,n=e.component;return Nn.position.x=n.position[1],Nn.position.y=n.position[0],Nn.position.z=-10,Nn.setTarget(new o.Vector3(n.position[1],n.position[0])),T(n.distance,zn),t}})}(t=function(e){return h({state:e,name:a.marker,create:function(e){var t,n,a=e.state,r=e.component,i=o.Mesh.CreatePlane(et,1.4,zn,!0);return i.uniqueId=parseInt(r.entity),i.position=new o.Vector3(9999,9999,9999),i.material=new o.StandardMaterial("material",zn),i.material.useAlphaFromDiffuseTexture=!0,Ve({mesh:i,color:[1,1,1],texture:Ze,scene:zn}),i.material.diffuseTexture.hasAlpha=!0,i.animations[0]=(t=new o.Animation("getScaleAnimation","scaling",1,o.Animation.ANIMATIONTYPE_VECTOR3,o.Animation.ANIMATIONLOOPMODE_RELATIVE),(n=[]).push({frame:0,value:new o.Vector3(2,2,1)}),n.push({frame:.5,value:new o.Vector3(.9,.9,1)}),t.setKeys(n),t),i.animations[1]=function(){var e=new o.Animation("getAlphaAnimation","material.alpha",1,o.Animation.ANIMATIONTYPE_FLOAT,o.Animation.ANIMATIONLOOPMODE_RELATIVE),t=[];return t.push({frame:0,value:1}),t.push({frame:.5,value:0}),e.setKeys(t),e}(),a},update:function(e){var t=e.state,n=e.component,a=zn.getMeshByUniqueId(parseInt(et));return a&&(a.material.diffuseColor=new o.Color3(n.color[0],n.color[1],n.color[2]),zn.beginAnimation(a,0,1,!1),a.position.x=n.position[0],a.position.y=n.position[1],a.position.z=-1),t}})}(t=en(t))))))),t=s({state:t,data:{entity:Un,name:a.ai,human:!0,level:0,color:[0,0,1],textureSet:["","","","","","",""],active:!0}}),t=s({state:t,data:{version:n,entity:Yt,name:a.game,grid:[],round:0,currentPlayer:Un,gameStarted:!1,playersQueue:[],boxRotationQueue:[],colorBlindMode:!1,customLevelSettings:{players:_t().slice(0,8),difficulty:Ht.easy,quickStart:!0,mapType:""},musicEnabled:!1}}),t=s({state:t,data:{entity:wt,name:a.ui,type:g.mainMenu}}),t=s({state:t,data:{entity:S,name:a.camera,position:[0,0],distance:0}}),t=s({state:t,data:{entity:et,name:a.marker,color:[1,1,1],position:[0,0]}});var r=JSON.parse(localStorage.getItem($e)||"null"),i=null===(e=Jt({state:r||A}))||void 0===e?void 0:e.version;return r&&i===n&&(t=Mn(Mn({},t),{entity:r.entity,component:r.component})),Xe(),t}();zn.registerBeforeRender((function(){qn=function(e){var t=e.state;C="second",I={};var n=t.system.concat().sort((function(e,t){return e>t?-1:1})).reduce((function(e,t){return t.tick({state:e,eventBuffer:M})}),t);return M={},C="first",M=E({},I),n}({state:qn})})),window.addEventListener("resize",(function(){T(B(Sn({state:qn})).cameraDistance,zn),Rn.resize()}))}},e=>{e.O(0,[216],(()=>(697,e(e.s=697)))),e.O()}]);